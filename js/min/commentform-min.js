jQuery(document).ready(function($){jQuery("#commentform").removeAttr("novalidate"),jQuery("#subscribes_form").submit(function(){event.preventDefault()}),jQuery("#subscribes_form .enewletter_widget_submit").click(function(e){var t=0;e.preventDefault();var i=jQuery(this).closest(".e-newsletter-widget");if(i.find("#newsletter_action").val(jQuery(this).attr("id")),i.find("#message").text(email_newsletter_widget_scripts.saving).slideDown(),"new_subscribe"==jQuery(this).attr("id")&&""==i.find("#e_newsletter_email").val()){var r=i.find("#message"),n="true"!==r.attr("aria-hidden");r.attr("aria-expanded",!n),r.attr("aria-hidden",n),r.text(email_newsletter_widget_scripts.empty_email).slideDown(),t=1}if(0==t){var s=new Array;jQuery.each(i.find('input[name="e_newsletter_groups_id[]"]'),function(){(jQuery(this).is(":checked")||"hidden"==jQuery(this).attr("type"))&&s.push(jQuery(this).val())});var a=new Array;jQuery.each(i.find('input[name="e_newsletter_auto_groups_id[]"]'),function(){a.push(jQuery(this).val())});var u=new Array;jQuery.each(i.find('input[name="e_newsletter_add_groups_id[]"]'),function(){u.push(jQuery(this).val())});var _=new Array;jQuery.each(i.find('input[name="e_newsletter_remove_groups_id[]"]'),function(){_.push(jQuery(this).val())});var d={action:"manage_subscriptions_ajax",newsletter_action:i.find("#newsletter_action").val(),unsubscribe_code:i.find("#unsubscribe_code").val(),e_newsletter_email:i.find("#e_newsletter_email").val(),e_newsletter_name:i.find("#e_newsletter_name").val(),newsletter_action:i.find("#newsletter_action").val(),e_newsletter_groups_id:s,e_newsletter_auto_groups_id:a,e_newsletter_add_groups_id:u,e_newsletter_remove_groups_id:_};jQuery.post(email_newsletter_widget_scripts.ajax_url,d,function(e){e=jQuery.parseJSON(e),"undefined"!=typeof e.redirect&&e.redirect?window.location=e.redirect:(i.find("#message").slideUp("fast",function(){jQuery(this).text(e.message).slideDown("fast")}),"undefined"!=typeof e.subscribe_groups&&jQuery.each(e.subscribe_groups,function(e,t){i.find(".e_newsletter_groups_id_"+t).attr("checked",!0)}),"undefined"!=typeof e.unsubscribe_code&&i.find("#unsubscribe_code").val(e.unsubscribe_code),i.find("#"+e.view).slideDown("fast"),i.find("#"+e.hide).slideUp("fast"))})}})});